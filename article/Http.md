---
createTime: 2017/07/10 16:34:25
title:从输入URL到浏览器显示页面发生了什么
description:简单介绍了从输入URL到浏览器显示页面发生了什么
---

###浏览器渲染页面过程
互联网内各网络设备间的通信都遵循TCP/IP协议。

####1，在浏览器输入url.
如：https://bj.lianjia.com/
其中的https是协议，bj.lianjia.com是网络地址。一般的网络地址分为ip地址或者域名。这里的就是域名。当输入的网络地址是域名的时候，一般会解析成计算机可识别的ip地址。

####2，应用层DNS解析域名。
（DNS由解析器及域名服务器组成，域名服务器是指保存有该网络中所有主机的域名和对应IP地址，并具有将域名转换为IP地址功能的服务器）

客户端一般会先从本地找一般有没有对应的ip地址。如若没有，才会往上级DNS服务器查找直至找到或到根节点。

####3，应用层客户端发送http请求。
http请求一般包括请求报头和请求主体两部分。请求报头包括请求的方法(GET/POST),目标URL，请求的协议(https/http/ftp....),返回的信息是否需要缓存，以及客户端是否发送cookie等。

####4，传输层TCP传输报文。
TCP协议为传输报文提供了可靠的字节流服务，为方便传输，它将大块的数据分割成以报文段为单位的数据包进行管理。并对他们进行编号，方便服务端接收时准确还原报文信息。 TCP协议通过三次握手保证传输的安全可靠。

####5，网络层IP协议查询服务端MAC地址。
IP协议的作用是将TCP分割好的报文段传送给接收端。为了能准确传送给接收端，需要找到接收端的MAC地址（IP地址跟MAC地址一一对应）。ARP协议可以将IP地址解析成对应的MAC地址。当通信的双方不在同一个局域网时，需要多次中转才能到达最终的目标，在中转的过程中需要通过下一个中转站的MAC地址来搜索下一个中转目标。

####6，数据到达数据链路层
找到接收端的MAC地址后，IP协议就将数据发送到数据链路层进行传输。到这一步位置，客户端发送请求阶段结束。

####7，服务端接收数据
接收端的服务器在链路层接收到数据包，再层层向上直到应用层。这过程中包括在运输层通过TCP协议讲分段的数据包重新组成原来的HTTP请求报文。

####8，服务器相应请求。
服务接收到客户端发送的HTTP请求后，查找客户端请求的资源，并返回响应报文，响应报文中包括一个重要的信息——状态码。状态码由三位数字组成，其中比较常见的是200 OK表示请求成功。301表示永久重定向，即请求的资源已经永久转移到新的位置。在返回301状态码的同时，响应报文也会附带重定向的url，客户端接收到后将http请求的url做相应的改变再重新发送。404 not found 表示客户端请求的资源找不到。

####9，服务器返回相应的文件。
请求成功后，服务器会返回相应的HTML文件。接下来就到了页面的渲染阶段了。

####10，浏览器显示 HTML
####11，浏览器发送请求获取嵌入在 HTML 中的资源（如图片、音频、视频、CSS、JS等等）
####12，浏览器发送异步请求
